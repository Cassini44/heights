import{s as I,t,w as D,c as A,a as b}from"./TableEngine-DRdhVy-Y.js";let O=null,d=null;async function m({refresh:n=!1}={}){return d&&!n?d:(O&&!n||(O=I.hdsData("getAdminData").then(l=>(d=l.data,O=null,d)).catch(l=>{throw O=null,l})),O)}async function f(){window.t=t;var{class_locations:n,courses_all:l,courses_table:_,delivery_hours_cost:i,delivery_methods:E,locations_table:s,package_courses:r,packages_all:T,users_table:c}=await m();//! COURSES ----------------------------------------------------------------------------------------------------------
t.createTable("courses_table","COURSE_ID",_,{rowProccesorFunction(e){},forceTemplate:["COURSE_ID","BUTTON__DRILL_MASTER_DETAIL","COURSE_NAME","COURSE_CATEGORY","COURSE_TYPE","COURSE_DESCRIPTION","COURSE_MINIMUM_HOURS","IS_ACTIVE","CREATION_DATE"],tableOptions:{rowFormatter:function(e){e.getElement()},rowContextMenu:[{label:"Delete Row",action:function(e,o){o.delete()}}]},columnOptions:{COURSE_DESCRIPTION:{editor:"input",widthGrow:5},COURSE_NAME:{editor:"input",widthGrow:2},COURSE_MINIMUM_HOURS:{title:"Min Hours",hozAlign:"center",minWidth:70,maxWidth:80,editor:"number",editorParams:{min:0,max:100,step:1}}},additionalColumns:[{field:"BUTTON__DRILL_MASTER_DETAIL"}],onSaveServerFunction:async function(e){var o=t.getTableEditsForDb2(e),u=t.getTableEditsForDb2("delivery_methods_table",["COURSE_DELIVERY_METHOD_ID","COURSE_ID","DELIVERY_METHOD","IS_ACTIVE"]),R=D.swapColumnName(t.getTableEditsForDb2("course_locations_table",["COURSE_DELIVERY_METHOD_ID","IS_ACTIVE","LOCATION_NAME","COURSE_DELIVERY_CLASS_LOCATION_ID"]),"LOCATION_NAME","LOCATION_ID"),S=t.getTableEditsForDb2("delivery_hours_cost"),C=await I.hdsData("setCourses",{data:{COURSES:o,COURSE_DELIVERY_CLASS_LOCATIONS:R,COURSE_DELIVERY_METHODS:u,COURSE_DELIVERY_HOURS_COST:S}});console.log(C)}});//! COURSES --> DELIVERY_METHOD ---------------------------------------------------------------------------------------
t.createTable("delivery_methods_table","COURSE_DELIVERY_METHOD_ID",E,{forceTemplate:["COURSE_DELIVERY_METHOD_ID","COURSE_ID","BUTTON__DRILL_MASTER_DETAIL","DELIVERY_METHOD","IS_ACTIVE"],tableOptions:{initialFilter:function(e){return!1},rowFormatter:function(e){},rowContextMenu:[{label:"Delete Row",action:function(e,o){o.delete()}}]},columnOptions:{COURSE_ID:{mutator:e=>e??t.getTable("courses_table").getSelectedData()[0].COURSE_ID}},additionalColumns:[{field:"BUTTON__DRILL_MASTER_DETAIL"}]});//! COURSES --> DELIVERY_METHOD --> DELIVERY_METHOD_LOCATIONS  ------------------------------------------------------------------------------------------------------------------------
var a=D.createLookupObjectFromTable(s,"LOCATION_NAME","LOCATION_ID");t.createTable("course_locations_table","COURSE_DELIVERY_CLASS_LOCATION_ID",n,{forceTemplate:["LOCATION_NAME","IS_ACTIVE","LOCATION_ID","COURSE_DELIVERY_METHOD_ID","COURSE_DELIVERY_CLASS_LOCATION_ID"],tableOptions:{initialFilter:function(e){return!1},rowFormatter:function(e){},rowContextMenu:[{label:"Delete Row",action:function(e,o){o.delete()}}]},columnOptions:{LOCATION_NAME:{...A.createDropdown(D.array.pc(s,"LOCATION_NAME",!0,!1)),accessor:e=>a[e]},COURSE_DELIVERY_METHOD_ID:{mutator:e=>e??t.getTable("delivery_methods_table").getSelectedData()[0].COURSE_DELIVERY_METHOD_ID}},additionalColumns:[],includeRowSelector:!1});//! COURSES --> DELIVERY_METHOD --> DELIVERY_METHOD_PRICES
t.createTable("delivery_hours_cost","COURSE_DELIVERY_COST_ID",i,{forceTemplate:["HOURS","COST","IS_ACTIVE","COURSE_DELIVERY_METHOD_ID","COURSE_DELIVERY_COST_ID"],columnOptions:{COURSE_DELIVERY_METHOD_ID:{mutator:e=>e??t.getTable("delivery_methods_table").getSelectedData()[0].COURSE_DELIVERY_METHOD_ID},HOURS:{title:"Hours",hozAlign:"center",minWidth:70,maxWidth:80,editor:"number",editorParams:{min:0,max:100,step:1}},COST:{formatter:"money",editor:"number",formatterParams:{symbol:"$"}}},tableOptions:{initialFilter:function(e){return!1},rowFormatter:function(e){},rowContextMenu:[{label:"Delete Row",action:function(e,o){o.delete()}}]},additionalColumns:[],includeRowSelector:!1}),t.createTable("locations_table","LOCATION_ID",s,{tableOptions:{rowFormatter:function(e){}},columnOptions:{LOCATION_NAME:{editor:"input"},ADDRESS_1:{},ADDRESS_2:{},CITY:{},IS_ACTIVE:{},STATE:{},ZIP_CODE:{}},additionalColumns:[],onSaveServerFunction:async function(e){var o=t.getTableEditsForDb2(e);await I.hdsData("setLocationTable",{data:o})},includeRowSelector:!1}),t.createTable("users_table","USER_ID",c,{forceTemplate:["BUTTON__NOTES","USER_ID","CREATION_DATE","FIRST_NAME","LAST_NAME","PHONE_NUMBER","USER_TYPE","ADDRESS_1","ADDRESS_2","BIRTH_DATE","CITY","EMAIL","GENDER","IS_LEGACY","PASSWORD_RESET_FLAG"],onSaveServerFunction:function(e){t.getTableEdits(e)},tableOptions:{rowFormatter:function(e){}},columnOptions:{CREATION_DATE:{title:"Account Created On",field:"CREATION_DATE",headerTooltip:!0},FIRST_NAME:{editor:"input"}},additionalColumns:[{field:"BUTTON__NOTES",title:"Notes",formatter:()=>'<span class="material-icons-outlined">note</span>',cellClick:(e,o)=>{alert("cell clicked")}}]}),t.createTable("packages_available_courses","COURSE_DELIVERY_COST_ID",l,{forceTemplate:[],tableOptions:{rowFormatter:function(e){return'<div style="height:5px;"></div>'}},columnOptions:{COURSE_NAME:{editable:!1},DELIVERY_METHOD:{editable:!1},HOURS:{editable:!1},COST:{editable:!1}},additionalColumns:[{field:"BUTTON__ADD_TO",hozAlign:"center",frozen:!0,headerSort:!1,formatter:()=>b.icons.add_box,cellClick:(e,o)=>{o.getRow().getIndex()}}]}),t.createTable("packages_table","PACKAGE_ID",T,{forceTemplate:[],tableOptions:{rowFormatter:function(e){}},columnOptions:{PACKAGE_NAME:{editor:"input"},PACKAGE_DESCRIPTION:{editor:"input"},CREATION_DATE:{}},additionalColumns:[]}),t.createTable("package_courses_table","PACKAGE_COURSE_ID",r,{forceTemplate:[],tableOptions:{rowFormatter:function(e){}},columnOptions:{},additionalColumns:[]})}function g(){let n=t.getTable("courses_table"),l=t.getTable("delivery_methods_table"),_=t.getTable("course_locations_table"),i=t.getTable("delivery_hours_cost");n.on("cellClick",function(E,s){if(s.getField()==="BUTTON__DRILL_MASTER_DETAIL"){var r=s.getRow(),T=r.isSelected();if(n.deselectRow(),l.deselectRow(),T){//! deselecting
r.deselect(),l.setFilter(a=>!1),_.setFilter(a=>!1),i.setFilter(a=>!1)}else{//! selecting
r.select();var c=r.getData().COURSE_ID;_.setFilter(a=>!1),i.setFilter(a=>!1),l.setFilter(a=>a.COURSE_ID===c)}}}),l.on("cellClick",function(E,s){if(s.getField()==="BUTTON__DRILL_MASTER_DETAIL"){var r=s.getRow(),T=r.isSelected();if(r.getTable().deselectRow(),T)r.deselect(),_.setFilter(a=>!1),i.setFilter(a=>!1);else{r.select();var c=r.getData().COURSE_DELIVERY_METHOD_ID;_.setFilter(a=>a.COURSE_DELIVERY_METHOD_ID===c),i.setFilter(a=>a.COURSE_DELIVERY_METHOD_ID===c)}}})}function L(){t.getTable("package_courses_table"),t.getTable("packages_table"),t.getTable("packages_available_courses")}function p(){const n=new google.maps.Map(document.getElementById("map"),{center:{lat:41.489904,lng:-81.517437},zoom:11,mapId:"f9bd1ad9de8dec9f"}),l=[{lat:41.488347,lng:-81.607387},{lat:41.48719,lng:-81.640175},{lat:41.513546,lng:-81.641033},{lat:41.53398,lng:-81.553142}];var _=new google.maps.Polygon({map:n,paths:l,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,editable:!0,geodesic:!0});_.setMap(n),["bounds_changed","dragstart","drag","dragend"].forEach(i=>{_.addListener(i,()=>{var E;console.log({bounds:(E=_.getBounds())==null?void 0:E.toJSON(),eventName:i})})})}window.addEventListener("load",async()=>{await f(),g(),L(),p()});
